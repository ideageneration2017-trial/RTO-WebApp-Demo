<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Attendance - Trainer Portal</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    :root {
      --sidebar-bg: #eaf6fb;
      --accent: #e53935;
      --brand-1: #0f766e;
      --card-bg: #fff;
      --muted: #6b7280;
      --success: #22c55e;
      --warning: #f59e0b;
      --danger: #ef4444;
      --shadow: 0 6px 20px rgba(18, 38, 63, 0.08);
      --radius: 12px;
      --max-width: 1200px;
    }
    html, body { height: 100%; margin: 0;}
    body {
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica Neue, Arial;
      background: #f7fafc;
      color: #111827;
      line-height: 1.3;
    }
    a { color: inherit; text-decoration: none; }
    .app {
      display: flex;
      min-height: 100vh;
      
    }
    .sidebar {
      width: 260px;
      background: var(--sidebar-bg);
      padding: 20px 18px;
      border-right: 1px solid rgba(15,23,42,0.03);
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    .nav {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 6px;
      overflow: auto;
    }
    .nav a {
      display: flex;
      gap: 12px;
      align-items: center;
      padding: 10px 10px;
      border-radius: 8px;
      font-size: 14px;
      color: #0f1724;
    }
    .nav a:hover {
      background: rgba(15,23,42,0.03);
    }
    .nav .group-title {
      color: var(--muted);
      font-size: 12px;
      padding: 10px 6px 2px;
      font-weight: 600;
      text-transform: uppercase;
    }
    .main {
      flex: 1;
	  display: flex;
	  flex-direction: column;
      padding: 28px;
      max-width: calc(var(--max-width) - 40px);
      margin: 0 auto;
      width: 100%;
    }
    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    .topbar-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .hamburger { display: none; }
    .profile-avatar {
      width: 40px; height: 40px; border-radius: 50%; object-fit: cover;
      border: 2px solid #fff;
      box-shadow: 0 4px 12px rgba(2, 6, 23, 0.08);
    }
    .profile-container { position: relative; display: flex; align-items: center; gap: 10px; cursor: pointer; user-select: none; }
    .profile-dropdown-menu {
      position: absolute;
      right: 0; top: 100%; margin-top: 12px; width: 260px;
      background: #fff; border: 1px solid #e5e7eb; border-radius: 8px;
      box-shadow: 0 10px 30px rgba(2,6,23,0.12); z-index: 50;
      padding-bottom: 8px;
      display: none;
    }
    .profile-dropdown-menu.shown { display: block;}
    .dropdown-arrow { color: #9ca3af; transition: transform .18s ease; }
    .page-header { padding-bottom: 14px; }
    .page-header h1 { margin: 0; font-size: 20px; font-weight: 700; }
    .page-header p { margin: 6px 0 0; color: var(--muted); font-size: 13px; }

    /* Attendance Page Specific Styles */
    .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 24px;
      margin-bottom: 24px;
    }
    .card-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 16px;
      color: #1e293b;
    }
    .attendance-grid {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
      align-items: center;
      gap: 16px;
      padding: 10px 0;
      border-bottom: 1px solid #e2e8f0;
    }
    .attendance-grid:last-child {
        border-bottom: none;
    }
    .attendance-status-label {
        font-weight: 600;
        color: var(--muted);
    }
    .attendance-options input[type="radio"] {
        display: none;
    }
    .attendance-options label {
        display: inline-block;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.2s ease-in-out;
    }
    .attendance-options input[type="radio"]:checked + label {
        background-color: var(--brand-1);
        color: #fff;
        border-color: var(--brand-1);
    }
    .attendance-options label:hover {
        background-color: #f1f5f9;
    }
    .attendance-options input[type="radio"]:checked + label.late {
        background-color: var(--warning);
        border-color: var(--warning);
    }
    .attendance-options input[type="radio"]:checked + label.absent {
        background-color: var(--danger);
        border-color: var(--danger);
    }
    .attendance-options input[type="radio"]:checked + label.excused {
        background-color: #6b7280;
        border-color: #6b7280;
    }
    .student-info {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    .student-info img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
    }
    .student-info span {
        font-weight: 600;
        color: #334155;
    }
    .attendance-summary {
        background: var(--brand-1);
        color: #fff;
        padding: 20px 24px;
        border-radius: var(--radius);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .attendance-summary .stats {
        display: flex;
        gap: 24px;
    }
    .attendance-summary .stat {
        display: flex;
        align-items: center;
        gap: 8px;
    }
    .attendance-summary .stat .count {
        font-size: 24px;
        font-weight: 700;
    }
    .btn {
      border: 1px solid transparent;
      padding: 10px 20px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease-in-out;
    }
    .btn.primary {
      background: var(--accent);
      color: #fff;
    }
    .btn.primary:hover {
      background: #c62828;
    }
    .btn.ghost {
      background: none;
      border-color: #e2e8f0;
      color: #334155;
    }
    .btn.ghost:hover {
      background: #e2e8f0;
    }
    select, input, textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        font-family: 'Inter', sans-serif;
    }
    /* New styles for the collapsible menu */
    .nav-link-group {
      display: flex;
      flex-direction: column;
    }
    .nav-link-group a {
      justify-content: space-between;
    }
    .nav-link-group a:hover {
      background: rgba(15,23,42,0.03);
    }
    .nav-link-group a.active {
      background-color:#60a5fa;
      color:#fff;
    }
    .nav-link-group ul {
      list-style-type: none;
      padding: 0;
      margin: 0;
      display: none; /* Initially hidden */
    }
    .nav-link-group ul.open {
	padding-left: 24px;
      display: block;
    }
    .nav-link-group ul li a {
      padding-left: 36px; /* Indent sub-menu items */
    }
    .nav-link-group .expand-icon {
      transition: transform 0.2s ease-in-out;
    }
    .nav-link-group .expand-icon.rotated {
      transform: rotate(180deg);
    }
	 .footer {
      margin-top: auto;
      padding-top: 18px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
	  background: #f9f9f9; 
	  border-top: 1px solid #ddd;
	  }
  </style>
</head>
<body>

<div class="app">
  <aside class="sidebar">
    <div style="padding:16px;display:flex;justify-content:center;align-items:center;height:80px;overflow:hidden;">
      <img src="isoft.jpg" alt="ISoft Logo" style="max-height: 56px; width:auto; object-fit:contain;">
    </div>
    <nav class="nav" aria-label="Main navigation">
      <div class="group-title">Main</div>
      <a href="TrainerDashboard.html"><span class="material-icons">dashboard</span>Dashboard</a>
      <a href="TrainerMyClasses.html"><span class="material-icons">calendar_month</span>My Classes</a>
      <a href="TrainerMyStudents.html"><span class="material-icons">groups</span>My Students</a>
      <a href="#"><span class="material-icons">assignment</span>Assessments</a>
			  
	<div class="nav-link-group">
		<a href="#" id="attendance-toggle">
			<span style="display:flex; align-items:center; gap:12px;">
			<span class="material-icons">event_available</span>
			  Attendance
			</span>
			<span class="material-icons expand-icon">expand_more</span>
		 </a>
		 <ul id="attendance-submenu" class="open submenu">
			<li><a href="TrainerMarkAttendance.html" class="active">Mark Attendance</a></li>
			<li><a href="TrainerViewAttendance.html">View Attendance</a></li>
			
		  </ul>
		</div>


      <div class="group-title">Admin</div>
      <a href="#"><span class="material-icons">folder</span>Documents & Evidence</a>
      <a href="#"><span class="material-icons">bar_chart</span>Reports & Analytics</a>
      <a href="#"><span class="material-icons">mail</span>Messages</a>
      <div class="group-title">Compliance</div>
      <a href="#"><span class="material-icons">info</span>CRICOS & Visa Alerts</a>
      <div class="group-title">Support</div>
      <a href="#"><span class="material-icons">smart_toy</span>Ask AI</a>
      <a href="#"><span class="material-icons">support_agent</span>Contact Admin</a>
    </nav>
  </aside>

  <main class="main">
    <div class="topbar">
      <div class="topbar-left">
        <button class="hamburger" onclick="toggleSidebar()">
          <span class="material-icons">menu</span>
        </button>
      </div>
      <div class="user">
        <div class="profile-container" id="profile-root">
          <div id="profile-menu-button" style="display:flex;align-items:center;gap:10px;cursor:pointer;">
            <img src="owner.jpg" alt="avatar" class="profile-avatar">
            <div style="font-weight:600;color:#0f1724;">William Smith</div>
            <span id="dropdown-arrow" class="material-icons">expand_more</span>
          </div>
          <div id="profile-dropdown-menu" class="profile-dropdown-menu" aria-hidden="true">
            <div style="padding:16px;border-bottom:1px solid #e5e7eb;">
              <div style="font-weight:bold;color:#1f2937;">Hi, William</div>
              <div style="font-size:14px;color:#6b7280;">william.smith@isoftanz.com.au</div>
            </div>
            <ul style="list-style:none;margin:0;padding:0;">
              <li><a href="#" style="display:flex;align-items:center;padding:10px 16px;color:#374151;"><span class="material-icons" style="margin-right:8px;">person</span>Edit Profile</a></li>
              <li><a href="#" style="display:flex;align-items:center;padding:10px 16px;color:#374151;"><span class="material-icons" style="margin-right:8px;">settings</span>Account settings</a></li>
              <li><a href="#" style="display:flex;align-items:center;padding:10px 16px;color:#374151;"><span class="material-icons" style="margin-right:8px;">help_outline</span>Support</a></li>
              <li><a href="#" style="display:flex;align-items:center;padding:10px 16px;color:#374151;border-top:1px solid #e5e7eb;margin-top:4px;"><span class="material-icons" style="margin-right:8px;">logout</span>Sign out</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    
    <div class="page-header">
      <h1>Mark Attendance</h1>
      <p>Select a class session and mark the attendance for your students.</p>
    </div>

    <div>
      <div class="card">
        <div class="card-title">Select Class Session</div>
        <select id="classSelect">
          <option value="">-- Select a class --</option>
          <option value="1">BSB40120 Certificate IV in Business (15/10/2025, 9:00 AM)</option>
          <option value="2">SIT30616 Certificate III in Hospitality (15/10/2025, 1:00 PM)</option>
          <option value="3">CHC30113 Certificate III in Early Childhood Education (16/10/2025, 10:30 AM)</option>
        </select>
      </div>

      <div class="card" id="studentListCard" style="display:none;">
        <div class="card-title">Student List</div>
        <div class="attendance-grid">
            <div class="attendance-status-label">Student</div>
            <div class="attendance-status-label">Present</div>
            <div class="attendance-status-label">Late</div>
            <div class="attendance-status-label">Absent</div>
            <div class="attendance-status-label">Excused</div>
        </div>
        <div id="studentList">
            </div>
      </div>

      <div class="attendance-summary" id="attendanceSummary" style="display:none;">
          <div class="stats">
              <div class="stat"><span class="material-icons" style="color:#fff;">check_circle</span><span class="count" id="presentCount">0</span> Present</div>
              <div class="stat"><span class="material-icons" style="color:#fff;">schedule</span><span class="count" id="lateCount">0</span> Late</div>
              <div class="stat"><span class="material-icons" style="color:#fff;">cancel</span><span class="count" id="absentCount">0</span> Absent</div>
              <div class="stat"><span class="material-icons" style="color:#fff;">info</span><span class="count" id="excusedCount">0</span> Excused</div>
          </div>
          <button class="btn primary" onclick="submitAttendance()">Submit Attendance</button>
      </div>
    </div>
    <div class="footer">
      <div class="quick-links">
        <a class="small text-muted" href="#">Help center</a>
        <a class="small text-muted" href="#">Policies</a>
        <a class="small text-muted" href="#">Contact support</a>
      </div>
      <div class="small text-muted">2025 iSOFT Trainer portal</div>
    </div>
  </main>
</div>
<script>
  // Profile dropdown logic from the template
  const profileMenuButton = document.getElementById('profile-menu-button');
  const profileDropdownMenu = document.getElementById('profile-dropdown-menu');
  const dropdownArrow = document.getElementById('dropdown-arrow');
  if(profileMenuButton) {
    profileMenuButton.addEventListener('click', function(e) {
      e.stopPropagation();
      profileDropdownMenu.classList.toggle('shown');
      profileDropdownMenu.setAttribute('aria-hidden', !profileDropdownMenu.classList.contains('shown'));
      dropdownArrow.style.transform = profileDropdownMenu.classList.contains('shown') ? 'rotate(180deg)' : 'rotate(0deg)';
    });
    window.addEventListener('click', function(event) {
      if (!profileMenuButton.contains(event.target) && !profileDropdownMenu.contains(event.target)) {
        profileDropdownMenu.classList.remove('shown');
        profileDropdownMenu.setAttribute('aria-hidden', "true");
        dropdownArrow.style.transform = 'rotate(0deg)';
      }
    });
  }

  // Attendance Sub-menu Logic
  const attendanceToggle = document.getElementById('attendance-toggle');
  const attendanceSubmenu = document.getElementById('attendance-submenu');
  const expandIcon = attendanceToggle.querySelector('.expand-icon');

  if (attendanceToggle) {
    attendanceToggle.addEventListener('click', (e) => {
      e.preventDefault();
      attendanceSubmenu.classList.toggle('open');
      expandIcon.classList.toggle('rotated');
    });
  }
  
  // Dummy data for demonstration
  const students = {
      '1': [
          { id: 101, name: 'Alice Johnson', photo: 'https://i.pravatar.cc/150?u=a042581f4e29026704a' },
          { id: 102, name: 'Bob Williams', photo: 'https://i.pravatar.cc/150?u=a042581f4e29026704b' },
          { id: 103, name: 'Charlie Brown', photo: 'https://i.pravatar.cc/150?u=a042581f4e29026704c' },
          { id: 104, name: 'Diana Prince', photo: 'https://i.pravatar.cc/150?u=a042581f4e29026704d' }
      ],
      '2': [
          { id: 201, name: 'Eva Green', photo: 'https://i.pravatar.cc/150?u=a042581f4e29026704e' },
          { id: 202, name: 'Frank White', photo: 'https://i.pravatar.cc/150?u=a042581f4e29026704f' }
      ],
      '3': [
          { id: 301, name: 'Grace Taylor', photo: 'https://i.pravatar.cc/150?u=a042581f4e29026704g' },
          { id: 302, name: 'Harry Potter', photo: 'https://i.pravatar.cc/150?u=a042581f4e29026704h' },
          { id: 303, name: 'Ivy Adams', photo: 'https://i.pravatar.cc/150?u=a042581f4e29026704i' }
      ]
  };

  function renderStudentList(classId) {
      const studentListContainer = document.getElementById('studentList');
      const studentListCard = document.getElementById('studentListCard');
      const attendanceSummary = document.getElementById('attendanceSummary');
      studentListContainer.innerHTML = '';
      
      if (!classId) {
          studentListCard.style.display = 'none';
          attendanceSummary.style.display = 'none';
          return;
      }

      studentListCard.style.display = 'block';
      attendanceSummary.style.display = 'flex';
      
      const studentsForClass = students[classId] || [];
      studentsForClass.forEach(student => {
          const studentRow = document.createElement('div');
          studentRow.className = 'attendance-grid';
          studentRow.innerHTML = `
              <div class="student-info">
                  <img src="${student.photo}" alt="${student.name}">
                  <span>${student.name}</span>
              </div>
              <div class="attendance-options">
                  <input type="radio" id="present-${student.id}" name="status-${student.id}" value="present" checked>
                  <label for="present-${student.id}" class="material-icons">check</label>
              </div>
              <div class="attendance-options">
                  <input type="radio" id="late-${student.id}" name="status-${student.id}" value="late">
                  <label for="late-${student.id}" class="material-icons late">access_time</label>
              </div>
              <div class="attendance-options">
                  <input type="radio" id="absent-${student.id}" name="status-${student.id}" value="absent">
                  <label for="absent-${student.id}" class="material-icons absent">close</label>
              </div>
              <div class="attendance-options">
                  <input type="radio" id="excused-${student.id}" name="status-${student.id}" value="excused">
                  <label for="excused-${student.id}" class="material-icons excused">info</label>
              </div>
          `;
          studentListContainer.appendChild(studentRow);
      });

      // Add event listeners for radio buttons to update the summary
      document.querySelectorAll('input[type="radio"]').forEach(input => {
          input.addEventListener('change', updateSummary);
      });

      updateSummary();
  }

  function updateSummary() {
      const present = document.querySelectorAll('input[value="present"]:checked').length;
      const late = document.querySelectorAll('input[value="late"]:checked').length;
      const absent = document.querySelectorAll('input[value="absent"]:checked').length;
      const excused = document.querySelectorAll('input[value="excused"]:checked').length;

      document.getElementById('presentCount').innerText = present;
      document.getElementById('lateCount').innerText = late;
      document.getElementById('absentCount').innerText = absent;
      document.getElementById('excusedCount').innerText = excused;
  }

  function submitAttendance() {
      const classId = document.getElementById('classSelect').value;
      if (!classId) {
          alert('Please select a class first.');
          return;
      }
      
      // Collect the attendance data
      const attendanceData = {};
      const studentsForClass = students[classId] || [];
      studentsForClass.forEach(student => {
          const status = document.querySelector(`input[name="status-${student.id}"]:checked`).value;
          attendanceData[student.id] = status;
      });

      // You would send this data to your backend API here
      console.log('Submitting attendance for class:', classId);
      console.log('Attendance data:', attendanceData);

      alert('Attendance submitted successfully!');
  }

  document.getElementById('classSelect').addEventListener('change', (e) => {
      renderStudentList(e.target.value);
  });

  // Initial render on page load
  document.addEventListener('DOMContentLoaded', () => {
      renderStudentList(document.getElementById('classSelect').value);
  });
</script>

</body>

</html>
